<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<meta charset="utf-8" /> 
		<title>Gamelab</title>
		<link rel="stylesheet" href="@@htdocs@@/style.css" type="text/css" />
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
		<style>
			fieldset { box-shadow: none; }
			form { margin-left: auto; margin-right: auto; max-width: 100%; }
		</style>
		<script src="@@htdocs@@/script.js"></script>
		<script src="@@cgibin@@/home.js"></script>
	</head>
	<body onload="loadExpr();" onclick="onNavUp();">
		<header>
			<a id="navButton" href="#" onclick="return(onNav(event));"><i class="fa fa-navicon"></i></a>
			<h1>gamelab</h1>
			<span>
				<span id="exprCountdownTilNext">Next:</span><span id="exprCountdownTilStart">Start:</span>
				<span id="exprCountdown"><i class="fa fa-spinner fa-spin"></i></span>
			</span>
		</header>
		<div id="navParent">
			<nav id="nav">
				<ul>
					<li><a href="#defaultTab"><i class="fa fa-fw fa-play"></i> Play</a></li>
					<li><a href="#history"><i class="fa fa-fw fa-history"></i> History</a></li>
					<li><a href="#instructions"><i class="fa fa-fw fa-info"></i> Instructions</a></li>
					<li><a href="@@cgibin@@/dologout.html"><i class="fa fa-fw fa-sign-out"></i> Logout</a></li>
				</ul>
			</nav>
		</div>
		<article id="instructions" class="tab">
			<h2>Instructions</h2>
			<div id="instructionsLoading"><i class="fa fa-spinner fa-spin"></i></div>
			<div id="instructionsLoaded"></div>
		</article>
		<article id="history" class="tab">
			<h2>Play History</h2>
			<div id="historyLoading"><i class="fa fa-spinner fa-spin"></i></div>
			<div id="historyLoaded" class="noshow">
				<section id="historyPlay" class="noshow">
					<p>
						You have <span id="historyLottery"></span> tickets.
					</p>
				</section>
				<section id="historyNotYet" class="noshow">
					<p>
						No history to report yet.
					</p>
				</section>
				<section id="historyNotStarted" class="noshow">
					<p>
						Waiting for game to start...
					</p>
				</section>
			</div>
		</article>
		<article id="defaultTab" class="tab">
			<h2>Play Game</h2>
			<div id="exprLoading"><i class="fa fa-spinner fa-spin"></i></div>
			<div id="exprLoaded" class="noshow">
				<section id="exprNotStarted" class="noshow">
					<p>
						Waiting for game to start...
					</p>
				</section>
				<section id="exprDone" class="noshow">
					<p>
						You've played all the games for this round &ndash; great!
						Please wait to play again.
					</p>
				</section>
				<section id="exprFinished" class="noshow">
					<p>
						Experiment is finished.
					</p>
				</section>
				<section id="exprPlay" class="noshow">
					<h3>
						Game <span id="playGameNum"></span> of <span id="playGameMax"></span>,
						round <span id="playRoundNum"></span> of <span id="playRoundMax"></span>
					</h3>
					<div id="exprHistory">
						<div>
							Lottery tickets: <span id="exprHistoryLottery"></span> 
						</div>
						<div id="skipExplain" class="warning">
							<div>
								<div><i class="fa fa-exclamation-circle"></i></div>
								<div>
									In the last round, not enough participants played, so no points were tallied for the round.
								</div>
							</div>
						</div>
						<div id="exprHistoryMatrix"></div>
					</div>
					<aside>
						<div>
							Select strategies from the matrix below.
							Once selected, you must enter probabilities for all strategies.
							These must be fractions or decimal numbers with no greater than four digits following the decimal.
						</div>
					</aside>
					<div id="exprMatrix"></div>
					<form method="post" action="@@cgibin@@/doplay.json" id="playGame" onsubmit="return(playGame(this));">
						<div id="playGameErrorState" class="noshow">
							<div class="warning">
								<div>
									<i class="fa fa-exclamation-circle"></i>
									<span>
										You've already played this game.  (Did you play twice?) 
										<a href="#" onclick="window.location.reload(true);">Reload</a> to refresh the game view.
									</span>
								</div>
							</div>
						</div>
						<div id="playGameErrorForm" class="noshow">
							<div class="warning">
								<div>
									<i class="fa fa-exclamation-circle"></i>
									<span>Form not correctly filled out.</span>
								</div>
							</div>
						</div>
						<div id="playGameErrorJson" class="noshow">
							<div class="warning">
								<div>
									<i class="fa fa-warning"></i>
									<span>A system error occured.</span>
								</div>
							</div>
						</div>
						<input type="hidden" id="exprPlayGid" name="gid" />
						<input type="hidden" id="exprPlayRound" name="round" />
						<fieldset id="exprPlayList"></fieldset>
					</form>
				</section>
			</div>
		</article>
		<footer>
			&copy; 2014, 
			<a href="http://www.kcons.eu"><i>k</i>-Consulting</a>
			<a href="@@cgibin@@/privacy.html">Privacy</a>
		</footer>
	</body>
</html>
