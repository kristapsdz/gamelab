<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<meta charset="utf-8" /> 
		<title>Gamelab Administration</title>
		<link rel="stylesheet" href="@@cgibin@@/style.css" type="text/css" />
		<script src="@@htdocs@@/script.js"></script>
		<script src="@@cgibin@@/home.js"></script>
	</head>
	<body onload="loadGames(); loadPlayers(); loadExpr();">
		<header>
			<nav>
				<ul>
					<li><h1>Administrator</h1></li>
					<li><a href="@@cgibin@@/dologout.html">Logout</a></li>
				</ul>
			</nav>
		</header>
		<article>
			<section>
				<h2>Status</h2>
				<aside>
					This is your gamelab experiment's administrative console.
					Your experiment has begun or is scheduled to begin; here you can see game status.
				<aside>
				<section id="statusExpr">
					<h3>Run Status</h3>
					<div id="statusExprProgress"></div>
					<div id="statusExprWaiting"></div>
					<div id="statusExprLoading">
						<img src="@@htdocs@@/ajax-loader.gif" alt="Loading" />
						Loading experiment run status...
					</div>
				</section>
				<section>
					<h3>Experiment Games</h3>
					<ul id="loadGames">
						<li><img src="@@htdocs@@/ajax-loader.gif" class="loader" alt="Loading..." />Loading...</li>
					</ul>
				</section>
				<section>
					<h3>Experiment Players</h3>
					<aside>
						Players in your experiment.
						If a player is greyed out, he or she is disabled.
						Disabled players are not e-mailed a password when the experiment starts, nor are they allowed to log in.
						To disable a player, just click the red symbol alongisde.
						To enable a player, use the green symbol.
					</aside>
					<ul id="loadPlayers">
						<li><img src="@@htdocs@@/ajax-loader.gif" class="loader" alt="Loading..." />Loading...</li>
					</ul>
				</section>
			</section>
			<section>
				<h2>Parameters</h2>
				<aside>
					Here you do something something.
				</aside>
				<form action="@@cgibin@@/dochangemail.html" method="post" id="changeMail" onsubmit="return(sendForm(this, doChangeMailSetup, doChangeMailError, doChangeMailSuccess));">
					<section>
						<h3>Change E-mail</h3>
						<aside>
							Set your e-mail address here.
							You will be logged out after doing so.
						</aside>
						<div class="error">
							<div style="display: none;" id="changeMailErrSystem">An unexpected system error occurred.</div>
							<div style="display: none;" id="changeMailErrForm">Invalid new or existing e-mail address.</div>
						</div>
						<fieldset>
							<div><input required="required" type="email" name="email1" placeholder="Existing E-mail"/></div>
							<div><input required="required" type="email" name="email2" placeholder="New E-mail"/></div>
							<div><input required="required" type="email" name="email3" placeholder="Repeat New E-mail"/></div>
							<div><input id="changeMailSubmit" type="submit" value="Submit" /></div>
						</fieldset>
					</section>
				</form>
				<form action="@@cgibin@@/dochangepass.html" method="post" id="changePass" onsubmit="return(sendForm(this, doChangePassSetup, doChangePassError, doChangePassSuccess));">
					<section>
						<h3>Change Password</h3>
						<div class="error">
							<div style="display: none;" id="changePassErrSystem">An unexpected system error occurred.</div>
							<div style="display: none;" id="changePassErrForm">Invalid new or existing password.</div>
						</div>
						<aside>
							Set your password here.
							You will be logged out after doing so.
						</aside>
						<fieldset>
							<div><input required="required" type="password" name="password1" placeholder="Existing Password"/></div>
							<div><input required="required" type="password" name="password2" placeholder="New Password"/></div>
							<div><input required="required" type="password" name="password3" placeholder="Repeat New Password"/></div>
							<div><input id="changePassSubmit" type="submit" value="Submit" /></div>
						</fieldset>
					</section>
				</form>
				<form action="@@cgibin@@/dochangesmtp.html" method="post" id="changeSmtp" onsubmit="return(sendForm(this, doChangeSmtpSetup, doChangeSmtpError, doChangeSmtpSuccess));">
					<section>
						<h3>Change SMTP Properties</h3>
						<div class="error">
							<div style="display: none;" id="changeSmtpErrSystem">An unexpected system error occurred.</div>
							<div style="display: none;" id="changeSmtpErrForm">Invalid new or existing parameters.</div>
						</div>
						<aside>
							In order to send e-mails to players, you need to configure a valid e-mail sending service.
							Fill in the <q>From Address</q> (which appears on all e-mails to players),
							<q>SMTP Server</q> to a valid SSL-secured SMTP server,
							<q>SMTP User</q> to the your server account name, and
							<q>SMTP Password</q> to the your user's password.
						</aside>
						<fieldset>
							<div><input required="required" type="email" name="email" placeholder="you@example.com"/></div>
							<div><input required="required" type="text" name="server" placeholder="smtp://example.com:587"/></div>
							<div><input required="required" type="text" name="user" placeholder="SMTP User"/></div>
							<div><input required="required" type="password" name="password" placeholder="SMTP Password"/></div>
							<div><input id="changeSmtpSubmit" type="submit" value="Submit" /></div>
						</fieldset>
					</section>
				</form>
			</section>
		</article>
		<footer>
			&copy; 2014, 
			<a href="http://www.kcons.eu"><i>k</i>-Consulting</a>
			<a href="@@htdocs@@/privacy.html">Privacy</a>
		</footer>
	</body>
</html>
